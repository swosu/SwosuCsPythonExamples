<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (0)
 -->
<!-- Title: DataCollectionFSM Pages: 1 -->
<svg width="1852pt" height="244pt"
 viewBox="0.00 0.00 1852.00 243.92" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(18 225.92)">
<title>DataCollectionFSM</title>
<polygon fill="white" stroke="transparent" points="-18,18 -18,-225.92 1834,-225.92 1834,18 -18,18"/>
<text text-anchor="middle" x="908" y="-189.52" font-family="Helvetica" font-size="18.00">Monty Hall Data&#45;Collection EFSM</text>
<text text-anchor="middle" x="908" y="-169.52" font-family="Helvetica" font-size="18.00">(what we do, what we log, and when we stop)</text>
<!-- Start -->
<g id="node1" class="node">
<title>Start</title>
<path fill="none" stroke="black" d="M93,-151.92C93,-151.92 12,-151.92 12,-151.92 6,-151.92 0,-145.92 0,-139.92 0,-139.92 0,-127.92 0,-127.92 0,-121.92 6,-115.92 12,-115.92 12,-115.92 93,-115.92 93,-115.92 99,-115.92 105,-121.92 105,-127.92 105,-127.92 105,-139.92 105,-139.92 105,-145.92 99,-151.92 93,-151.92"/>
<text text-anchor="start" x="7" y="-136.92" font-family="Helvetica" font-size="10.00">Start / Next Trial</text>
<text text-anchor="start" x="7" y="-125.92" font-family="Helvetica" font-size="10.00">(action: trial_id += 1)</text>
</g>
<!-- Seed -->
<g id="node2" class="node">
<title>Seed</title>
<path fill="none" stroke="black" d="M260,-151.92C260,-151.92 179,-151.92 179,-151.92 173,-151.92 167,-145.92 167,-139.92 167,-139.92 167,-127.92 167,-127.92 167,-121.92 173,-115.92 179,-115.92 179,-115.92 260,-115.92 260,-115.92 266,-115.92 272,-121.92 272,-127.92 272,-127.92 272,-139.92 272,-139.92 272,-145.92 266,-151.92 260,-151.92"/>
<text text-anchor="start" x="174" y="-136.92" font-family="Helvetica" font-size="10.00">Seed RNG (optional)</text>
<text text-anchor="start" x="174" y="-125.92" font-family="Helvetica" font-size="10.00">(action: set seed)</text>
</g>
<!-- Start&#45;&gt;Seed -->
<g id="edge1" class="edge">
<title>Start&#45;&gt;Seed</title>
<path fill="none" stroke="black" d="M105.34,-133C105.34,-133 158.72,-133 158.72,-133"/>
<polygon fill="black" stroke="black" points="158.72,-135.8 166.72,-133 158.72,-130.2 158.72,-135.8"/>
</g>
<!-- Prize -->
<g id="node3" class="node">
<title>Prize</title>
<path fill="none" stroke="black" d="M476.5,-154.42C476.5,-154.42 344.5,-154.42 344.5,-154.42 338.5,-154.42 332.5,-148.42 332.5,-142.42 332.5,-142.42 332.5,-125.42 332.5,-125.42 332.5,-119.42 338.5,-113.42 344.5,-113.42 344.5,-113.42 476.5,-113.42 476.5,-113.42 482.5,-113.42 488.5,-119.42 488.5,-125.42 488.5,-125.42 488.5,-142.42 488.5,-142.42 488.5,-148.42 482.5,-154.42 476.5,-154.42"/>
<text text-anchor="start" x="339.5" y="-142.42" font-family="Helvetica" font-size="10.00">Place Prize</text>
<text text-anchor="start" x="339.5" y="-131.42" font-family="Helvetica" font-size="10.00">(action: prize_door = rand{1,2,3})</text>
<text text-anchor="start" x="339.5" y="-120.42" font-family="Helvetica" font-size="10.00">(log: prize_door)</text>
</g>
<!-- Seed&#45;&gt;Prize -->
<g id="edge2" class="edge">
<title>Seed&#45;&gt;Prize</title>
<path fill="none" stroke="black" d="M272.2,-133C272.2,-133 324.22,-133 324.22,-133"/>
<polygon fill="black" stroke="black" points="324.22,-135.8 332.22,-133 324.22,-130.2 324.22,-135.8"/>
</g>
<!-- Pick -->
<g id="node4" class="node">
<title>Pick</title>
<path fill="none" stroke="black" d="M693,-154.42C693,-154.42 556,-154.42 556,-154.42 550,-154.42 544,-148.42 544,-142.42 544,-142.42 544,-125.42 544,-125.42 544,-119.42 550,-113.42 556,-113.42 556,-113.42 693,-113.42 693,-113.42 699,-113.42 705,-119.42 705,-125.42 705,-125.42 705,-142.42 705,-142.42 705,-148.42 699,-154.42 693,-154.42"/>
<text text-anchor="start" x="551" y="-142.42" font-family="Helvetica" font-size="10.00">Player Chooses Door</text>
<text text-anchor="start" x="551" y="-131.42" font-family="Helvetica" font-size="10.00">(action: player_door = rand{1,2,3})</text>
<text text-anchor="start" x="551" y="-120.42" font-family="Helvetica" font-size="10.00">(log: player_door)</text>
</g>
<!-- Prize&#45;&gt;Pick -->
<g id="edge3" class="edge">
<title>Prize&#45;&gt;Pick</title>
<path fill="none" stroke="black" d="M488.67,-133C488.67,-133 535.67,-133 535.67,-133"/>
<polygon fill="black" stroke="black" points="535.67,-135.8 543.67,-133 535.67,-130.2 535.67,-135.8"/>
</g>
<!-- Reveal -->
<g id="node5" class="node">
<title>Reveal</title>
<path fill="none" stroke="black" d="M998.5,-159.92C998.5,-159.92 792.5,-159.92 792.5,-159.92 786.5,-159.92 780.5,-153.92 780.5,-147.92 780.5,-147.92 780.5,-119.92 780.5,-119.92 780.5,-113.92 786.5,-107.92 792.5,-107.92 792.5,-107.92 998.5,-107.92 998.5,-107.92 1004.5,-107.92 1010.5,-113.92 1010.5,-119.92 1010.5,-119.92 1010.5,-147.92 1010.5,-147.92 1010.5,-153.92 1004.5,-159.92 998.5,-159.92"/>
<text text-anchor="start" x="787.5" y="-147.92" font-family="Helvetica" font-size="10.00">Host Reveals Goat Door</text>
<text text-anchor="start" x="787.5" y="-136.92" font-family="Helvetica" font-size="10.00">(action: reveal_door = legal goat door)</text>
<text text-anchor="start" x="787.5" y="-125.92" font-family="Helvetica" font-size="10.00">(constraint: reveal_door ≠ prize_door, player_door)</text>
<text text-anchor="start" x="787.5" y="-114.92" font-family="Helvetica" font-size="10.00">(log: reveal_door)</text>
</g>
<!-- Pick&#45;&gt;Reveal -->
<g id="edge4" class="edge">
<title>Pick&#45;&gt;Reveal</title>
<path fill="none" stroke="black" d="M705.08,-133C705.08,-133 772.38,-133 772.38,-133"/>
<polygon fill="black" stroke="black" points="772.38,-135.8 780.38,-133 772.38,-130.2 772.38,-135.8"/>
</g>
<!-- Decide -->
<g id="node6" class="node">
<title>Decide</title>
<path fill="none" stroke="black" d="M1271.5,-154.42C1271.5,-154.42 1099.5,-154.42 1099.5,-154.42 1093.5,-154.42 1087.5,-148.42 1087.5,-142.42 1087.5,-142.42 1087.5,-125.42 1087.5,-125.42 1087.5,-119.42 1093.5,-113.42 1099.5,-113.42 1099.5,-113.42 1271.5,-113.42 1271.5,-113.42 1277.5,-113.42 1283.5,-119.42 1283.5,-125.42 1283.5,-125.42 1283.5,-142.42 1283.5,-142.42 1283.5,-148.42 1277.5,-154.42 1271.5,-154.42"/>
<text text-anchor="start" x="1094.5" y="-142.42" font-family="Helvetica" font-size="10.00">Player Decision</text>
<text text-anchor="start" x="1094.5" y="-131.42" font-family="Helvetica" font-size="10.00">(action: decision = coin_toss stay/switch)</text>
<text text-anchor="start" x="1094.5" y="-120.42" font-family="Helvetica" font-size="10.00">(log: decision)</text>
</g>
<!-- Reveal&#45;&gt;Decide -->
<g id="edge5" class="edge">
<title>Reveal&#45;&gt;Decide</title>
<path fill="none" stroke="black" d="M1010.53,-133C1010.53,-133 1079.45,-133 1079.45,-133"/>
<polygon fill="black" stroke="black" points="1079.45,-135.8 1087.45,-133 1079.45,-130.2 1079.45,-135.8"/>
</g>
<!-- Final -->
<g id="node7" class="node">
<title>Final</title>
<path fill="none" stroke="black" d="M1536,-159.92C1536,-159.92 1377,-159.92 1377,-159.92 1371,-159.92 1365,-153.92 1365,-147.92 1365,-147.92 1365,-119.92 1365,-119.92 1365,-113.92 1371,-107.92 1377,-107.92 1377,-107.92 1536,-107.92 1536,-107.92 1542,-107.92 1548,-113.92 1548,-119.92 1548,-119.92 1548,-147.92 1548,-147.92 1548,-153.92 1542,-159.92 1536,-159.92"/>
<text text-anchor="start" x="1372" y="-147.92" font-family="Helvetica" font-size="10.00">Finalize Door</text>
<text text-anchor="start" x="1372" y="-136.92" font-family="Helvetica" font-size="10.00">(action: final_door = player_door if stay</text>
<text text-anchor="start" x="1372" y="-125.92" font-family="Helvetica" font-size="10.00"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else remaining closed door)</text>
<text text-anchor="start" x="1372" y="-114.92" font-family="Helvetica" font-size="10.00">(log: final_door)</text>
</g>
<!-- Decide&#45;&gt;Final -->
<g id="edge6" class="edge">
<title>Decide&#45;&gt;Final</title>
<path fill="none" stroke="black" d="M1283.72,-133C1283.72,-133 1356.93,-133 1356.93,-133"/>
<polygon fill="black" stroke="black" points="1356.93,-135.8 1364.93,-133 1356.93,-130.2 1356.93,-135.8"/>
</g>
<!-- Resolve -->
<g id="node8" class="node">
<title>Resolve</title>
<path fill="none" stroke="black" d="M1804,-154.42C1804,-154.42 1637,-154.42 1637,-154.42 1631,-154.42 1625,-148.42 1625,-142.42 1625,-142.42 1625,-125.42 1625,-125.42 1625,-119.42 1631,-113.42 1637,-113.42 1637,-113.42 1804,-113.42 1804,-113.42 1810,-113.42 1816,-119.42 1816,-125.42 1816,-125.42 1816,-142.42 1816,-142.42 1816,-148.42 1810,-154.42 1804,-154.42"/>
<text text-anchor="start" x="1632" y="-142.42" font-family="Helvetica" font-size="10.00">Resolve Outcome</text>
<text text-anchor="start" x="1632" y="-131.42" font-family="Helvetica" font-size="10.00">(action: win = (final_door == prize_door))</text>
<text text-anchor="start" x="1632" y="-120.42" font-family="Helvetica" font-size="10.00">(log: win)</text>
</g>
<!-- Final&#45;&gt;Resolve -->
<g id="edge7" class="edge">
<title>Final&#45;&gt;Resolve</title>
<path fill="none" stroke="black" d="M1548.09,-140C1548.09,-140 1616.58,-140 1616.58,-140"/>
<polygon fill="black" stroke="black" points="1616.58,-142.8 1624.58,-140 1616.58,-137.2 1616.58,-142.8"/>
</g>
<!-- Row -->
<g id="node9" class="node">
<title>Row</title>
<path fill="none" stroke="black" d="M1591,-52.96C1591,-52.96 1448,-52.96 1448,-52.96 1442,-52.96 1436,-46.96 1436,-40.96 1436,-40.96 1436,-12.96 1436,-12.96 1436,-6.96 1442,-0.96 1448,-0.96 1448,-0.96 1591,-0.96 1591,-0.96 1597,-0.96 1603,-6.96 1603,-12.96 1603,-12.96 1603,-40.96 1603,-40.96 1603,-46.96 1597,-52.96 1591,-52.96"/>
<text text-anchor="start" x="1443" y="-40.96" font-family="Helvetica" font-size="10.00">Write Trial Row (CSV)</text>
<text text-anchor="start" x="1443" y="-29.96" font-family="Helvetica" font-size="10.00">(trial_id, seed, prize_door,</text>
<text text-anchor="start" x="1443" y="-18.96" font-family="Helvetica" font-size="10.00"> player_door, reveal_door,</text>
<text text-anchor="start" x="1443" y="-7.96" font-family="Helvetica" font-size="10.00"> decision, final_door, win, strategy)</text>
</g>
<!-- Resolve&#45;&gt;Row -->
<g id="edge8" class="edge">
<title>Resolve&#45;&gt;Row</title>
<path fill="none" stroke="black" d="M1625,-127C1597.85,-127 1575.5,-127 1575.5,-127 1575.5,-127 1575.5,-60.98 1575.5,-60.98"/>
<polygon fill="black" stroke="black" points="1578.3,-60.98 1575.5,-52.98 1572.7,-60.98 1578.3,-60.98"/>
<text text-anchor="middle" x="1653.5" y="-78.72" font-family="Helvetica" font-size="9.00">outcome_known</text>
</g>
<!-- Agg -->
<g id="node10" class="node">
<title>Agg</title>
<path fill="none" stroke="black" d="M1357,-52.96C1357,-52.96 1244,-52.96 1244,-52.96 1238,-52.96 1232,-46.96 1232,-40.96 1232,-40.96 1232,-12.96 1232,-12.96 1232,-6.96 1238,-0.96 1244,-0.96 1244,-0.96 1357,-0.96 1357,-0.96 1363,-0.96 1369,-6.96 1369,-12.96 1369,-12.96 1369,-40.96 1369,-40.96 1369,-46.96 1363,-52.96 1357,-52.96"/>
<text text-anchor="start" x="1239" y="-40.96" font-family="Helvetica" font-size="10.00">Update Counters</text>
<text text-anchor="start" x="1239" y="-29.96" font-family="Helvetica" font-size="10.00">stay_win/stay_lose</text>
<text text-anchor="start" x="1239" y="-18.96" font-family="Helvetica" font-size="10.00">switch_win/switch_lose</text>
<text text-anchor="start" x="1239" y="-7.96" font-family="Helvetica" font-size="10.00">+ door/decision distributions</text>
</g>
<!-- Row&#45;&gt;Agg -->
<g id="edge9" class="edge">
<title>Row&#45;&gt;Agg</title>
<path fill="none" stroke="black" d="M1435.77,-26C1435.77,-26 1377.25,-26 1377.25,-26"/>
<polygon fill="black" stroke="black" points="1377.25,-23.2 1369.25,-26 1377.25,-28.8 1377.25,-23.2"/>
</g>
<!-- CI -->
<g id="node11" class="node">
<title>CI</title>
<path fill="none" stroke="black" d="M1127,-47.46C1127,-47.46 1026,-47.46 1026,-47.46 1020,-47.46 1014,-41.46 1014,-35.46 1014,-35.46 1014,-18.46 1014,-18.46 1014,-12.46 1020,-6.46 1026,-6.46 1026,-6.46 1127,-6.46 1127,-6.46 1133,-6.46 1139,-12.46 1139,-18.46 1139,-18.46 1139,-35.46 1139,-35.46 1139,-41.46 1133,-47.46 1127,-47.46"/>
<text text-anchor="start" x="1021" y="-35.46" font-family="Helvetica" font-size="10.00">Update Stopping Stats</text>
<text text-anchor="start" x="1021" y="-24.46" font-family="Helvetica" font-size="10.00">(action: p̂ + CI halfwidths</text>
<text text-anchor="start" x="1021" y="-13.46" font-family="Helvetica" font-size="10.00">for stay and switch)</text>
</g>
<!-- Agg&#45;&gt;CI -->
<g id="edge10" class="edge">
<title>Agg&#45;&gt;CI</title>
<path fill="none" stroke="black" d="M1231.77,-26C1231.77,-26 1147,-26 1147,-26"/>
<polygon fill="black" stroke="black" points="1147,-23.2 1139,-26 1147,-28.8 1147,-23.2"/>
</g>
<!-- Check -->
<g id="node12" class="node">
<title>Check</title>
<path fill="none" stroke="black" d="M706.5,-52.96C706.5,-52.96 598.5,-52.96 598.5,-52.96 592.5,-52.96 586.5,-46.96 586.5,-40.96 586.5,-40.96 586.5,-12.96 586.5,-12.96 586.5,-6.96 592.5,-0.96 598.5,-0.96 598.5,-0.96 706.5,-0.96 706.5,-0.96 712.5,-0.96 718.5,-6.96 718.5,-12.96 718.5,-12.96 718.5,-40.96 718.5,-40.96 718.5,-46.96 712.5,-52.96 706.5,-52.96"/>
<text text-anchor="start" x="593.5" y="-40.96" font-family="Helvetica" font-size="10.00">Stopping Rule</text>
<text text-anchor="start" x="593.5" y="-29.96" font-family="Helvetica" font-size="10.00">IF halfwidth(stay) ≤ ε AND</text>
<text text-anchor="start" x="593.5" y="-18.96" font-family="Helvetica" font-size="10.00"> &#160;&#160;halfwidth(switch) ≤ ε</text>
<text text-anchor="start" x="593.5" y="-7.96" font-family="Helvetica" font-size="10.00">THEN stop ELSE continue</text>
</g>
<!-- CI&#45;&gt;Check -->
<g id="edge11" class="edge">
<title>CI&#45;&gt;Check</title>
<path fill="none" stroke="black" d="M1050.75,-47.62C1050.75,-62.51 1050.75,-80 1050.75,-80 1050.75,-80 711.75,-80 711.75,-80 711.75,-80 711.75,-61.17 711.75,-61.17"/>
<polygon fill="black" stroke="black" points="714.55,-61.17 711.75,-53.17 708.95,-61.17 714.55,-61.17"/>
<text text-anchor="middle" x="866.5" y="-78.72" font-family="Helvetica" font-size="9.00">stats_updated</text>
</g>
<!-- Check&#45;&gt;Start -->
<g id="edge13" class="edge">
<title>Check&#45;&gt;Start</title>
<path fill="none" stroke="black" d="M586.29,-26C430.24,-26 52.5,-26 52.5,-26 52.5,-26 52.5,-107.61 52.5,-107.61"/>
<polygon fill="black" stroke="black" points="49.7,-107.61 52.5,-115.61 55.3,-107.61 49.7,-107.61"/>
<text text-anchor="middle" x="476" y="-78.72" font-family="Helvetica" font-size="9.00">stop = false</text>
</g>
<!-- Stop -->
<g id="node13" class="node">
<title>Stop</title>
<path fill="none" stroke="black" d="M991.68,-23.8C991.68,-23.8 991.68,-30.13 991.68,-30.13 991.68,-33.29 988.58,-37.14 985.49,-37.82 985.49,-37.82 936.83,-48.53 936.83,-48.53 933.74,-49.21 927.49,-49.89 924.32,-49.89 924.32,-49.89 850.68,-49.89 850.68,-49.89 847.51,-49.89 841.26,-49.21 838.17,-48.53 838.17,-48.53 789.51,-37.82 789.51,-37.82 786.42,-37.14 783.32,-33.29 783.32,-30.13 783.32,-30.13 783.32,-23.8 783.32,-23.8 783.32,-20.63 786.42,-16.78 789.51,-16.1 789.51,-16.1 838.17,-5.39 838.17,-5.39 841.26,-4.71 847.51,-4.03 850.68,-4.03 850.68,-4.03 924.32,-4.03 924.32,-4.03 927.49,-4.03 933.74,-4.71 936.83,-5.39 936.83,-5.39 985.49,-16.1 985.49,-16.1 988.58,-16.78 991.68,-20.63 991.68,-23.8"/>
<path fill="none" stroke="black" d="M995.68,-22.73C995.68,-22.73 995.68,-31.2 995.68,-31.2 995.68,-35.43 991.54,-40.58 987.41,-41.49 987.41,-41.49 939.36,-52.06 939.36,-52.06 935.22,-52.97 926.85,-53.88 922.62,-53.88 922.62,-53.88 852.38,-53.88 852.38,-53.88 848.15,-53.88 839.78,-52.97 835.64,-52.06 835.64,-52.06 787.59,-41.49 787.59,-41.49 783.46,-40.58 779.32,-35.43 779.32,-31.2 779.32,-31.2 779.32,-22.73 779.32,-22.73 779.32,-18.49 783.46,-13.34 787.59,-12.43 787.59,-12.43 835.64,-1.86 835.64,-1.86 839.78,-0.95 848.15,-0.04 852.38,-0.04 852.38,-0.04 922.62,-0.04 922.62,-0.04 926.85,-0.04 935.22,-0.95 939.36,-1.86 939.36,-1.86 987.41,-12.43 987.41,-12.43 991.54,-13.34 995.68,-18.49 995.68,-22.73"/>
<text text-anchor="start" x="815.69" y="-29.96" font-family="Helvetica" font-size="10.00">Stop + Export Summary</text>
<text text-anchor="start" x="815.69" y="-18.96" font-family="Helvetica" font-size="10.00">(action: finalize tables/plots)</text>
</g>
<!-- Check&#45;&gt;Stop -->
<g id="edge12" class="edge">
<title>Check&#45;&gt;Stop</title>
<path fill="none" stroke="black" d="M718.59,-26C718.59,-26 771.22,-26 771.22,-26"/>
<polygon fill="black" stroke="black" points="771.22,-28.8 779.22,-26 771.22,-23.2 771.22,-28.8"/>
</g>
</g>
</svg>
