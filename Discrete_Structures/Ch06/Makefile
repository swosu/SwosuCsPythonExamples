# Makefile for Discrete_Structures/Ch06
#
# Usage:
#   make          # build main.pdf
#   make view     # build (if needed) and open the PDF
#   make clean    # remove auxiliary files
#
# Assumes: latexmk is installed (dnf install latexmk on Rocky, if needed)

PDF      = main.pdf
MAIN_TEX = main.tex
CHAPTERS = $(wildcard chapters/*.tex)
LATEXMK  = latexmk

# Default target: build the PDF
all: $(PDF)

$(PDF): $(MAIN_TEX) $(CHAPTERS)
	$(LATEXMK) -pdf -interaction=nonstopmode -halt-on-error $(MAIN_TEX)

# Open the PDF with your system's default viewer
view: $(PDF)
	xdg-open $(PDF) >/dev/null 2>&1 &

# Continuous preview (optional but nice)
watch:
	$(LATEXMK) -pdf -pvc -interaction=nonstopmode -halt-on-error $(MAIN_TEX)

# Clean out aux files generated by LaTeX/latexmk
clean:
	$(LATEXMK) -C $(MAIN_TEX)
	rm -f *.synctex.gz *.run.xml

